<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<title>

  Parsing the parser |


  Ashutosh  Sathe

</title>
<meta name="description" content="Personal webpage of Ashutosh Sathe 
">

<!-- Open Graph -->


<!-- Bootstrap & MDB -->
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet" integrity="sha512-MoRNloxbStBcD8z3M/2BmnT+rg4IsMxPkXaGh2zD6LGNNFE80W3onsAhRcMAMrSoyWL9xD7Ert0men7vR8LUZg==" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/css/mdb.min.css" integrity="sha512-RO38pBRxYH3SoOprtPTD86JFOclM51/XTIdEPh5j8sj4tp8jmQIx26twG52UaLi//hQldfrh7e51WzP9wuP32Q==" crossorigin="anonymous" />

<!-- Fonts & Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css"  integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.9.0/css/academicons.min.css" integrity="sha512-W4yqoT1+8NLkinBLBZko+dFB2ZbHsYLDdr50VElllRcNt2Q4/GSs6u71UHKxB7S6JEMCp5Ve4xjh3eGQl/HRvg==" crossorigin="anonymous">
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons">

<!-- Code Syntax Highlighting -->
<link rel="stylesheet" href="https://gitcdn.link/repo/jwarby/jekyll-pygments-themes/master/github.css" />

<!-- Styles -->

<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üëã</text></svg>">

<link rel="stylesheet" href="/assets/css/main.css">
<link rel="canonical" href="/blog/2021/parsing-the-parser/">

<!-- JQuery -->
<!-- jQuery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>


<!-- Theming-->

<script src="/assets/js/theme.js"></script>
<script src="/assets/js/dark_mode.js"></script>



<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-163324683-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() { dataLayer.push(arguments); }
  gtag('js', new Date());

  gtag('config', 'UA-163324683-1');
</script>




    
<!-- MathJax -->
<script type="text/javascript">
  window.MathJax = {
    tex: {
      tags: 'ams'
    }
  };
</script>
<script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.1.2/es5/tex-mml-chtml.js"></script>
<script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>


  </head>

  <body class="fixed-top-nav ">

    <!-- Header -->

    <header>

    <!-- Nav Bar -->
    <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top">
    <div class="container">
      
      <a class="navbar-brand title font-weight-lighter" href="/">
       <span class="font-weight-bold">Ashutosh</span>   Sathe
      </a>
      
      <!-- Navbar Toggle -->
      <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar top-bar"></span>
        <span class="icon-bar middle-bar"></span>
        <span class="icon-bar bottom-bar"></span>
      </button>
      <div class="collapse navbar-collapse text-right" id="navbarNav">
        <ul class="navbar-nav ml-auto flex-nowrap">
          <!-- About -->
          <li class="nav-item ">
            <a class="nav-link" href="/">
              about
              
            </a>
          </li>
          <!-- Other pages -->
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          <li class="nav-item ">
              <a class="nav-link" href="/papers/">
                papers
                
              </a>
          </li>
          
          
          
          <li class="nav-item ">
              <a class="nav-link" href="/projects/">
                projects
                
              </a>
          </li>
          
          
          
          <!-- Blog -->
          <li class="nav-item active">
            <a class="nav-link" href="/blog/">
              blog
              
            </a>
          </li>
          
          
            <div class = "toggle-container">
              <a id = "light-toggle">
                  <i class="fas fa-moon"></i>
                  <i class="fas fa-sun"></i>
              </a>
            </div>
          
        </ul>
      </div>
    </div>
  </nav>

</header>


    <!-- Content -->

    <div class="container mt-5">
      

<div class="post">

  <header class="post-header">
    <h1 class="post-title">Parsing the parser</h1>
    <p class="post-meta">April 1, 2021</p>
  </header>

  <article class="post-content">
    <p>This blog is about my project called <a href="https://github.com/ashutoshbsathe/yacv">yacv</a>. If you have no idea what that is, you should watch the <a href="https://www.youtube.com/watch?v=BozB0O0__Qg">video</a>. In this blog I go through:</p>
<ol>
  <li>Why I find parsing interesting</li>
  <li>Why I find parser generators to be amusing</li>
  <li>Why and how I built <code class="language-plaintext highlighter-rouge">yacv</code></li>
  <li>Interesting facts and references about parsers. You can <a href="#interesting-reads">skip down to this part</a> directly</li>
</ol>

<center>
<img src="/files/blog_assets/parsing-the-parser/dict_meaning.png" alt="dictionary meaning of parsing" width="100%" />
</center>

<p>Parsing is a very fundamental process in computer science. It comes up pretty much everywhere in computer science ‚Äì be it writing a simple command line program (which accepts and hence ‚Äúparses‚Äù command line arguments) or be it building a complicated client server architecture (which will most likely use message passing and hence will need ‚Äúparsing‚Äù the message)</p>

<h2 id="parsing-is-awesome">Parsing is awesome</h2>
<p>At my college, parsing is taught in compiler construction class ‚Äì in the very final semester of the degree. Because of this I wasn‚Äôt getting any theory (as in theoretical CS) related stuff in the very awesome <a href="https://suif.stanford.edu/dragonbook/">‚Äúdragon book‚Äù</a>. Due to COVID lockdown, I finally got time to revise theoretical CS again. After revision, I was just amazed how powerful the concepts in theoretical CS can be. I was also flabbergasted by the importance of parsing</p>

<p>The heart of ‚Äúcompiling a program‚Äù is parsing ‚Äì in a way, once you have the parse tree, you‚Äôre ‚Äúpretty much‚Äù done !</p>
<ul>
  <li>Once you get the parse tree, you‚Äôre sure that this program was syntactically correct (user hasn‚Äôt inputted a Python code into a C compiler)</li>
  <li>Using the syntax tree, you can VERY EASILY identify semantic errors (without a syntax tree, this is a guaranteed nightmare)</li>
  <li>Syntax directed translation can generate machine code for you ! (granted this code won‚Äôt be optimized in the slightest)</li>
  <li>Code optimization heavily relies on several structures and properties of syntax trees</li>
</ul>

<p>I mean ofcourse, it makes sense. There‚Äôs a reason parsing is in the first few steps of compilation pipeline. But I finally had the ‚Äúaha, this makes so much sense‚Äù moment so I had to write it here. The entire compiling process is in a weird-way ‚Äújust‚Äù parsing. You can just have syntax directed translation to generate you machine code which works ! Ofcourse, such a code will not have any safety checks or optimization whatsoever, but in theory it just works !! How cool is that !!!</p>

<p>In reality though, many people (including myself) would care about (boring) things like memory safety and (cool) things like code optimizations. But still, even then, you‚Äôre just adding things on top of parsing to make things better</p>

<h2 id="why-do-parser-generators-exist-">Why do parser generators exist ?</h2>
<p>Building a parser is no easy task. Making sure that parser works correctly for ALL the strings that can be possibly be input to the parser is a tricky task. For finite languages, this is very easy as we simply try all the possible strings in the language with the parser and verify that parser outputs ‚Äúyes‚Äù for all the strings in the language</p>

<p>On infinite languages i.e. most practical languages, this is impossible to do for obvious reasons. On the other hand, if we use some properties of formal languages, we can automatically generate the parser which will be guaranteed to work</p>

<p>Let‚Äôs take an example language \(L = a^nb^n\). If we were to write a parser for this in C, it would look something like this :</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="kt">int</span> <span class="nf">is_valid</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">s</span><span class="p">,</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* String `s` with length `n` */</span>
    <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span> <span class="o">&amp;&amp;</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="o">++</span><span class="p">]</span> <span class="o">==</span> <span class="sc">'a'</span> <span class="o">&amp;&amp;</span> <span class="o">++</span><span class="n">count</span><span class="p">);</span>
    <span class="cm">/* At this i, s[i] != 'a' and count = count(a) */</span>
    <span class="k">while</span><span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span> <span class="o">&amp;&amp;</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="o">++</span><span class="p">]</span> <span class="o">==</span> <span class="sc">'b'</span> <span class="o">&amp;&amp;</span> <span class="n">count</span><span class="o">--</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">count</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">i</span> <span class="o">==</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>It will work and because the language is so easy to understand, we can easily verify if this parser will work correctly or not. But in case of practical languages, this is often an impossible task to do so. So how can we make sure that our parser works correctly for all strings in a language ?</p>

<p>To be sure about this, we must know all the possible prefixes of strings in a language. A parser algorithm can then just read the string one by one and make sure the prefix (i.e. string read so far) belongs to one of the possible prefixes. If at any time, this string is NOT a possible prefix, we quit and say ‚Äúinvalid string‚Äù. Formally, these prefixes are referred to as ‚Äúviable prefixes‚Äù</p>

<p>But then, we have just moved the problem from ‚Äúknowing all the strings‚Äù to ‚Äúknowing all the prefixes‚Äù. <strong>Thankfully, for context free languages, language formed by all the prefixes of that language is a regular language.</strong> This means that we can generate a regular i.e. finite automata for identifying viable prefixes of a language. This is precisely what a parser generator does ‚Äì it generates the automaton of viable prefixes given the context free grammar and uses it to ‚Äúparse‚Äù the input string. This regularity in prefixes is also the reason why parser generators exist <em>only</em> for context free languages !</p>

<p>(BTW, the approach I‚Äôm discussing here is called ‚Äúbottom up parsing‚Äù and the specific algorithm is called ‚ÄúLR parsing‚Äù ‚Äì which was presented by Donald Knuth. There is also an approach called ‚Äúbottom up parsing‚Äù but it does not allow very interesting parser ‚Äúgenerators‚Äù so I‚Äôm skipping that here)</p>

<h2 id="key-takeaways">Key takeaways</h2>
<ul>
  <li>Parsers are awesome !</li>
  <li>Parsers (often) rely on finding viable prefixes</li>
  <li>Writing and testing parsers can be very difficult</li>
  <li>Parser generators can generate a parser that works perfectly for a given grammar</li>
  <li>Parser generators exist only for context free grammars because prefixes of only context free languages form a regular language</li>
</ul>

<h2 id="yacv-yet-another-compiler-visualizer"><code class="language-plaintext highlighter-rouge">yacv</code>: Yet Another Compiler Visualizer</h2>

<p>All the hardwork I had to go through to understand parsers made me realize that there are going to be tons of people like me around. What made parsers ‚Äúclick‚Äù to me was this amazing <a href="https://www.cs.princeton.edu/courses/archive/spring20/cos320/LR0/">LR(0) parser visualization by Zak Kincaid and Shaowei Zhu</a> which walks you through the parsing process step-by-step. Other tools such as <a href="http://jsmachines.sourceforge.net/machines/lr1.html">JSMachines</a> also helped. But none of these tools produced output which was ‚Äúpresentable‚Äù (i.e. can be put in presentation) So I wrote a small tool that visualizes parsing procedure using <a href="https://github.com/3b1b/manim"><code class="language-plaintext highlighter-rouge">manim</code></a> ‚Äì an animation library by <a href="https://www.youtube.com/channel/UCYO_jab_esuFRV4b17AJtAw">3Blue1Brown</a>. The name <code class="language-plaintext highlighter-rouge">yacv</code> is inspired from old parser generator software called <code class="language-plaintext highlighter-rouge">yacc</code> (Yet Another Compiler Compiler)</p>

<h3 id="approach">Approach</h3>
<p>Typical parsers (like LR and LL) read input stream one character at a time and keep building a partial parse tree until the input stream ends. At the end, the parse tree is (hopefully) complete and can be used further. In <code class="language-plaintext highlighter-rouge">yacv</code>, I progressively build a simple python \(n\)-ary tree structure as I am parsing. Later I use <code class="language-plaintext highlighter-rouge">GraphViz</code> to lay out the tree visually. This simplifies the programming and enables me to add as many parsers as I want to <code class="language-plaintext highlighter-rouge">yacv</code></p>

<center>
    <a href="https://mermaid.ink/img/eyJjb2RlIjoiZ3JhcGggTFJcbiAgICBBW0NvbnRleHQgRnJlZSBHcmFtbWFyIC0gR10gLS0-IEJbUGFyc2VyXVxuICAgIENbSW5wdXQgU3RyaW5nIC0gc10gLS0-IEJbUGFyc2VyXVxuICAgIEIgLS0-IHxQYXJzZSBUcmVlfCBEW0dyYXBodml6IENvbnZlcnRlcl1cbiAgICBEIC0tPiB8R3JhcGh2aXogR3JhcGh8IEVbTWFuaW0gRnJhbWVdIiwibWVybWFpZCI6eyJ0aGVtZSI6ImRlZmF1bHQifSwidXBkYXRlRWRpdG9yIjpmYWxzZX0"><img src="https://mermaid.ink/img/eyJjb2RlIjoiZ3JhcGggTFJcbiAgICBBW0NvbnRleHQgRnJlZSBHcmFtbWFyIC0gR10gLS0-IEJbUGFyc2VyXVxuICAgIENbSW5wdXQgU3RyaW5nIC0gc10gLS0-IEJbUGFyc2VyXVxuICAgIEIgLS0-IHxQYXJzZSBUcmVlfCBEW0dyYXBodml6IENvbnZlcnRlcl1cbiAgICBEIC0tPiB8R3JhcGh2aXogR3JhcGh8IEVbTWFuaW0gRnJhbWVdIiwibWVybWFpZCI6eyJ0aGVtZSI6ImRlZmF1bHQifSwidXBkYXRlRWRpdG9yIjpmYWxzZX0" alt="flow diagram of yacv" width="100%" /></a>
</center>

<h3 id="graphviz-conversion">Graphviz Conversion</h3>
<p>Converting the abstract syntax tree to graphviz graph was simple. Just creating the graph with the specification was simple enough. But that graph did not look ‚Äúnice‚Äù for 2 reasons:</p>

<ol>
  <li>The leaf nodes i.e. the terminals in the string were on various different levels</li>
  <li>Nodes on the RHS of the production weren‚Äôt on the same level</li>
  <li>All productions looked the same color</li>
</ol>

<table>
    <thead>
    <tr>
        <th> Before </th>
        <th> After </th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td><img src="data:image/png;base64,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" width="100%" /></td>
    <td><img src="/files/blog_assets/parsing-the-parser/ast-simple-cd-grammar.png" width="100%" /></td>
    </tr>
    </tbody>
</table>

<p>To get this transformation, I had to <a href="https://github.com/ashutoshbsathe/yacv/blob/a695164016a91fca9205bb237ed5087c3e6a2b93/yacv/abstractsyntaxtree.py#L4">store the production number at every node of the tree</a> and use <a href="https://github.com/ashutoshbsathe/yacv/blob/a695164016a91fca9205bb237ed5087c3e6a2b93/yacv/mobjects.py#L180">a lot of ‚Äúrank hacks‚Äù in graphviz</a>. Storing production ID at every node is a bit awkward because then you have to maintain some order of the productions. I figured the order in which they are present in the input file was the best. Then we can simply map production ID to a color (which is also customizable by user). I used <a href="https://pygraphviz.github.io/"><code class="language-plaintext highlighter-rouge">pygraphviz</code></a> for doing all the GraphViz stuff. It provides good enough control on the GraphViz graph you are creating despite being just a SWIG wrapper. One of the most valuable function for me was the <a href="https://pygraphviz.github.io/documentation/stable/reference/agraph.html?highlight=layout#pygraphviz.AGraph.layout"><code class="language-plaintext highlighter-rouge">layout</code></a> function. Layout function will hardcode the position of each and every node using the specified rendering algorithm. This simplified interfacing with <code class="language-plaintext highlighter-rouge">manim</code> a lot</p>

<h3 id="putting-everything-in-a-manim-frame">Putting everything in a <code class="language-plaintext highlighter-rouge">manim</code> frame</h3>
<p>This has to be the most frustrating part of the project. First, there is no reliable documentation for <code class="language-plaintext highlighter-rouge">manim</code> whatsoever. There are 2 versions of <code class="language-plaintext highlighter-rouge">manim</code> ‚Äì a community version called ManimCE and original version (by 3b1b) which uses OpenGL now. I had used manim once or twice before starting this project but not so much that I knew everything in and out. Thankfully, there is a series of <a href="https://www.youtube.com/playlist?list=PL2B6OzTsMUrwo4hA3BBfS7ZR34K361Z8F">excellent tutorial videos</a> on YouTube channel called <a href="https://www.youtube.com/c/TheoremofBeethoven">Theorem of Beethoven</a></p>

<p>The TL:DR of the tutorial was that everything in Manim is managed on a 14x8 grid. This meant that I had to resize my GraphViz graph to fit into 14x8 grid. Thankfully, <code class="language-plaintext highlighter-rouge">layout()</code> calculates the coordinates of each and every node so positioning nodes on the manim grid wasn‚Äôt a problem at all</p>

<p>About edges, GraphViz stores every edge as a <a href="https://en.wikipedia.org/wiki/ B%C3%A9zier_curve">B√©zier curve</a> (makes sense because GraphViz often renders to SVG). Finding this information took a lot of digging through GraphViz code, but it was worth it because I learned a lot about SVG and B√©zier curves. Storing a B√©zier curve usually means storing the control points, then at the time of rasterization, we can render \(n\) points on the curve using these control points. To put them in manim, I decided to render fixed \(n=100\) points on every edge in their original coordinates and then rescaled every point down to 14x8. Then using this list of points, I used a <code class="language-plaintext highlighter-rouge">VMobject</code> from manim and used <code class="language-plaintext highlighter-rouge">add_points_smoothly</code> method to add all these points into that object. All of this implementation is tied together in a new <code class="language-plaintext highlighter-rouge">Mobject</code> class called <code class="language-plaintext highlighter-rouge">GraphvizMobject</code> code for which is available <a href="https://github.com/ashutoshbsathe/yacv/blob/a695164016a91fca9205bb237ed5087c3e6a2b93/yacv/mobjects.py#L16">here</a></p>

<h3 id="animating-between-steps">Animating between steps</h3>

<p>Using simple manim transform on every node and edge wasn‚Äôt enough. It looked awkward with nodes flying everywhere</p>

<center>
<img src="/files/blog_assets/parsing-the-parser/awakward-animation.gif" alt="rajatvd/manimnx demo" width="100%" />
</center>

<p>To make the animations smoother, I had to relabel the GraphViz graph carefully, then map every node ID from GraphViz graph to an <code class="language-plaintext highlighter-rouge">Mobject</code> and then while transforming, use the node IDs to smooth the animations. The <a href="https://github.com/ashutoshbsathe/yacv/blob/a695164016a91fca9205bb237ed5087c3e6a2b93/yacv/mobjects.py#L123">code for the animation</a> speaks for itself better than I can</p>

<center>
<img src="/files/blog_assets/parsing-the-parser/smooth-animation.gif" alt="amooth animation demo" width="100%" />
</center>

<h3 id="final-outcome">Final outcome</h3>

<p>After the key components were working nicely together, I decided to sweeten the animation by adding visualization for the parsing stack as well. This was significantly easier than GraphViz although it needed some neat little tricks as well. Main obstacle in animating this was the size of stack during parsing. It is completely possible that stack contains 100s of elements during parsing at a time and it was very difficult to animate this. So I had two options when implementing stack animations:</p>

<ol>
  <li>Resize every element in stack once new element is added (so essentially font size of character decreases to accommodate new stack elements)</li>
  <li>Show only top-\(k\) stack elements and then show ‚Äú\(\dots\)‚Äù at the end to indicate more elements are present</li>
</ol>

<p>I went with the second option because it looked clean and I didn‚Äôt have to worry about dynamically resizing every single element in the stack. Animating these stack states was a cakewalk after animating <code class="language-plaintext highlighter-rouge">GraphvizMobject</code>s</p>

<p>Finally, I decided to package everything in a nice python package so everyone can access it without worrying about the implementation. This project was an insane rollercoaster ride. I doubted my tool choices at many times, I doubted in myself many times but at the end it was a really good learning experience. Check out yacv on <a href="https://github.com/ashutoshbsathe/yacv">GitHub</a> or read the <a href="https://ashutoshbsathe.github.io/yacv">docs</a></p>

<h2 id="interesting-reads">Interesting reads</h2>
<ol>
  <li><a href="https://www.amazon.com/Parsing-Techniques-Monographs-Computer-Science/dp/038720248X/ref=sr_11_1?ie=UTF8&amp;qid=1197794717&amp;sr=11-1">Awesome book on parsing</a></li>
  <li><a href="https://stackoverflow.com/questions/6319086/are-gcc-and-clang-parsers-really-handwritten">GCC and Clang use handwritten parsers</a></li>
  <li><a href="https://stackoverflow.com/a/14589567/7914234">Parsing C++ is (probably) Turing-complete</a></li>
  <li><a href="https://blog.reverberate.org/2013/09/ll-and-lr-in-context-why-parsing-tools.html">Why parsing tools are hard</a></li>
  <li><a href="http://craftinginterpreters.com/">A good, free book for interpreters</a></li>
</ol>

  </article>

  

</div>

    </div>

    <!-- Footer -->

    
<footer class="fixed-bottom">
  <div class="container mt-0">
    &copy; Copyright 2022 Ashutosh  Sathe.
    Powered by <a href="http://jekyllrb.com/" target="_blank">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank">GitHub Pages</a>.

    
    
  </div>
</footer>



  </body>

  <!-- Bootsrap & MDB scripts -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.4.4/umd/popper.min.js" integrity="sha512-eUQ9hGdLjBjY3F41CScH3UX+4JDSI9zXeroz7hJ+RteoCaY+GP/LDoM8AO+Pt+DRFw3nXqsjh9Zsts8hnYv8/A==" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha512-M5KW3ztuIICmVIhjSqXe01oV2bpe248gOxqmlcYrEzAvws7Pw3z6BK0iGbrwvdrUQUhi3eXgtxp5I8PDo9YfjQ==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/js/mdb.min.js" integrity="sha512-Mug9KHKmroQFMLm93zGrjhibM2z2Obg9l6qFG2qKjXEXkMp/VDkI4uju9m4QKPjWSwQ6O2qzZEnJDEeCw0Blcw==" crossorigin="anonymous"></script>

  
<!-- Mansory & imagesLoaded -->
<script defer src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
<script defer src="https://unpkg.com/imagesloaded@4/imagesloaded.pkgd.min.js"></script>
<script defer src="/assets/js/mansory.js" type="text/javascript"></script>


  
<!-- Enable Tooltips -->
<script type="text/javascript">
$(function () {$('[data-toggle="tooltip"]').tooltip()})
</script>



<!-- Medium Zoom JS -->
<script src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script>
<script src="/assets/js/zoom.js"></script>


<!-- Load Common JS -->
<script src="/assets/js/common.js"></script>


</html>
